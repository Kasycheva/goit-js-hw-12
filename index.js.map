{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '45854856-78ad068c46767c3f7b48e1998';\nexport const perPage = 15;\n\nexport const fetchImages = async (query, page = 1) => {\n  try {\n    const response = await axios.get(`${BASE_URL}`, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  }\n};\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from 'izitoast';\n\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  overlayOpacity: 0.8,\n});\n\nexport const createGalleryMarkup = (images) => {\n  return images\n    .map(\n      ({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"text-info\">Likes: <span class=\"number-info\">${likes}</span></p>\n          <p class=\"text-info\">Views: <span class=\"number-info\">${views}</span></p>\n          <p class=\"text-info\">Comments: <span class=\"number-info\">${comments}</span></p>\n          <p class=\"text-info\">Downloads: <span class=\"number-info\">${downloads}</span></p>\n        </div>\n      </li>`\n    )\n    .join('');\n};\n\nexport const renderGallery = (images, reset = false) => {\n  if (reset) {\n    gallery.innerHTML = '';\n  }\n  const markup = createGalleryMarkup(images);\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n};\n\nexport const showNotification = (message, type = 'error') => {\n  iziToast[type]({\n    message,\n    position: 'topRight',\n  });\n};\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, showNotification } from './js/render-functions.js';\n\nconst searchForm = document.querySelector('.search-form');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nconst showLoader = () => {\n  loader.classList.remove('hidden');\n};\n\nconst hideLoader = () => {\n  loader.classList.add('hidden');\n};\n\nconst onSearchForm = async (event) => {\n  event.preventDefault();\n  const query = event.target.elements.input.value.trim();\n  \n  if (!query) {\n    showNotification('Please enter a valid search query', 'error');\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n  await searchImages(query, currentPage);\n};\n\nconst searchImages = async (query, page) => {\n  showLoader();\n  \n  try {\n    const data = await fetchImages(query, page);\n    totalHits = data.totalHits;\n\n    if (totalHits === 0) {\n      showNotification('No images found. Please try again!', 'error');\n      loadMoreBtn.classList.add('hidden');\n      return;\n    }\n\n    renderGallery(data.hits, page === 1);\n    updateLoadMoreButton();\n  } catch (error) {\n    showNotification('Something went wrong. Please try again later.', 'error');\n  } finally {\n    hideLoader();\n  }\n};\n\nconst updateLoadMoreButton = () => {\n  const totalPages = Math.ceil(totalHits / 15);\n  if (currentPage >= totalPages) {\n    loadMoreBtn.classList.add('hidden');\n    showNotification(\"We're sorry, but you've reached the end of search results.\", 'info');\n  } else {\n    loadMoreBtn.classList.remove('hidden');\n  }\n};\n\nconst loadMoreImages = async () => {\n  currentPage++;\n  await searchImages(currentQuery, currentPage);\n  smoothScroll();\n};\n\nconst smoothScroll = () => {\n  const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n\nsearchForm.addEventListener('submit', onSearchForm);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n"],"names":["BASE_URL","API_KEY","perPage","fetchImages","query","page","axios","error","gallery","lightbox","SimpleLightbox","createGalleryMarkup","images","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderGallery","reset","markup","showNotification","message","type","iziToast","searchForm","loadMoreBtn","loader","currentPage","currentQuery","totalHits","showLoader","hideLoader","onSearchForm","event","searchImages","data","updateLoadMoreButton","totalPages","loadMoreImages","smoothScroll","cardHeight"],"mappings":"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"}